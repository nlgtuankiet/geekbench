version: v1.0
name: Initial Pipeline
agent:
  machine:
    type: e1-standard-2
    os_image: ubuntu1804
blocks:
  - name: Linux
    task:
      jobs:
        - name: Benchmark
          commands:
            - docker run -it nlgtuankiet/benchmark-ci | tee ./output_linux.txt
      agent:
        machine:
          type: e1-standard-2
          os_image: ubuntu1804
    dependencies: []
  - name: Docker
    task:
      jobs:
        - name: Benchmark
          commands:
            - ls -lha
      agent:
        machine:
          type: e1-standard-2
          os_image: ubuntu1804
        containers:
          - name: main
            image: nlgtuankiet/benchmark-ci
    dependencies: []
#  - name: Mac
#    dependencies: []
#    task:
#      agent:
#        machine:
#          type: a1-standard-4
#          os_image: macos-xcode11
#      jobs:
#        - name: Benchmark
#          commands:
#            - brew install docker; brew cask install docker; sudo open /Applications/Docker.app; echo "opened docker app"; sleep 15s; docker run -it nlgtuankiet/benchmark-ci | tee ./output_mac.txt

  # - name: Docker
  #   dependencies: []
  #   task:
  #     agent:
  #       machine:
  #         type: e1-standard-2
  #         os_image: ubuntu1804
  #       containers:
  #         - name: main
  #           image: 'semaphoreci/php:7.4-node'
  #     jobs:
  #       - name: Benchmark
  #         commands:
  #           - checkout; pwd; ls -lha; sh ./build_fire_fox.sh | tee ./output_docker.txt